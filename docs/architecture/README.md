# Arquitectura del Sistema JavaFlow

## ๐ Visiรณn General

JavaFlow es un sistema de gestiรณn de workflows tipo n8n construido con tecnologรญas Java empresariales, diseรฑado para ser **local-first** pero fรกcilmente migrable a la nube.

## ๐๏ธ Arquitectura de Alto Nivel

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                        CAPA DE PRESENTACIรN                      โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ  โ              Vaadin UI (Puerto 8080)                      โ  โ
โ  โ  โข Dashboard de Workflows                                 โ  โ
โ  โ  โข Editor Visual de Flujos                                โ  โ
โ  โ  โข Monitor de Ejecuciones                                 โ  โ
โ  โ  โข Gestiรณn de Bots                                        โ  โ
โ  โ  โข Logs y Auditorรญa                                       โ  โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                              โ โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                      CAPA DE APLICACIรN                          โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ  โ              Spring Boot Application                      โ  โ
โ  โ                                                            โ  โ
โ  โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ      โ  โ
โ  โ  โ   REST API  โ  โ  Security   โ  โ   WebSocket โ      โ  โ
โ  โ  โ  Controller โ  โ   (JWT)     โ  โ   (Events)  โ      โ  โ
โ  โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ      โ  โ
โ  โ                                                            โ  โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ  โ
โ  โ  โ           Service Layer (Business Logic)            โ โ  โ
โ  โ  โ  โข WorkflowService                                  โ โ  โ
โ  โ  โ  โข BotService                                       โ โ  โ
โ  โ  โ  โข ExecutionService                                 โ โ  โ
โ  โ  โ  โข MessageService                                   โ โ  โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ  โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                              โ โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    CAPA DE MOTOR DE WORKFLOW                     โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ  โ              Flowable BPMN Engine                         โ  โ
โ  โ                                                            โ  โ
โ  โ  โโโโโโโโโโโโ  โโโโโโโโโโโโ  โโโโโโโโโโโโ  โโโโโโโโโโโโ โ  โ
โ  โ  โ Process  โ  โ  Task    โ  โ  Event   โ  โ Decision โ โ  โ
โ  โ  โ Runtime  โ  โ Service  โ  โ Registry โ  โ  Engine  โ โ  โ
โ  โ  โโโโโโโโโโโโ  โโโโโโโโโโโโ  โโโโโโโโโโโโ  โโโโโโโโโโโโ โ  โ
โ  โ                                                            โ  โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ  โ
โ  โ  โ         Custom Task Handlers                        โ โ  โ
โ  โ  โ  โข SendMessageTask                                  โ โ  โ
โ  โ  โ  โข HTTPRequestTask                                  โ โ  โ
โ  โ  โ  โข DataTransformTask                                โ โ  โ
โ  โ  โ  โข ConditionalTask                                  โ โ  โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ  โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                              โ โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    CAPA DE INTEGRACIรN                           โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ  โ              Bot Integration Layer                        โ  โ
โ  โ                                                            โ  โ
โ  โ  โโโโโโโโโโโโโโโโโโโโ         โโโโโโโโโโโโโโโโโโโโ       โ  โ
โ  โ  โ  Telegram Bot    โ         โ  WhatsApp Web    โ       โ  โ
โ  โ  โ  โข Long Polling  โ         โ  โข QR Auth       โ       โ  โ
โ  โ  โ  โข Webhook       โ         โ  โข Message Queue โ       โ  โ
โ  โ  โ  โข Media Handler โ         โ  โข Media Handler โ       โ  โ
โ  โ  โโโโโโโโโโโโโโโโโโโโ         โโโโโโโโโโโโโโโโโโโโ       โ  โ
โ  โ                                                            โ  โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ  โ
โ  โ  โ         Message Queue (Optional)                    โ โ  โ
โ  โ  โ         RabbitMQ / Kafka / Redis                    โ โ  โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ  โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                              โ โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                      CAPA DE PERSISTENCIA                        โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ  โ              Spring Data JPA / Hibernate                  โ  โ
โ  โ                                                            โ  โ
โ  โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ      โ  โ
โ  โ  โ  Workflow   โ  โ     Bot     โ  โ   Message   โ      โ  โ
โ  โ  โ Repository  โ  โ Repository  โ  โ Repository  โ      โ  โ
โ  โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ      โ  โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                              โ โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                      BASE DE DATOS                               โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ  โ              PostgreSQL 14+                               โ  โ
โ  โ                                                            โ  โ
โ  โ  โโโโโโโโโโโโ  โโโโโโโโโโโโ  โโโโโโโโโโโโ  โโโโโโโโโโโโ โ  โ
โ  โ  โ  users   โ  โworkflows โ  โ   bots   โ  โ messages โ โ  โ
โ  โ  โโโโโโโโโโโโ  โโโโโโโโโโโโ  โโโโโโโโโโโโ  โโโโโโโโโโโโ โ  โ
โ  โ                                                            โ  โ
โ  โ  โโโโโโโโโโโโ  โโโโโโโโโโโโ  โโโโโโโโโโโโ  โโโโโโโโโโโโ โ  โ
โ  โ  โ   logs   โ  โexecution โ  โ  tasks   โ  โ variablesโ โ  โ
โ  โ  โโโโโโโโโโโโ  โโโโโโโโโโโโ  โโโโโโโโโโโโ  โโโโโโโโโโโโ โ  โ
โ  โ                                                            โ  โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ  โ
โ  โ  โ         Flowable Tables (ACT_*)                     โ โ  โ
โ  โ  โ  โข ACT_RE_* (Repository)                            โ โ  โ
โ  โ  โ  โข ACT_RU_* (Runtime)                               โ โ  โ
โ  โ  โ  โข ACT_HI_* (History)                               โ โ  โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ  โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

## ๐ Flujo de Datos Detallado

### Escenario 1: Recepciรณn de Mensaje de Telegram

```
โโโโโโโโโโโโโโโ
โ   Usuario   โ
โ  (Telegram) โ
โโโโโโโโฌโโโโโโโ
       โ 1. Envรญa mensaje
       โ
โโโโโโโโโโโโโโโโโโโโโโโ
โ  Telegram Bot API   โ
โ  (Long Polling)     โ
โโโโโโโโฌโโโโโโโโโโโโโโโ
       โ 2. Update recibido
       โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  TelegramBotListener                โ
โ  @Component                          โ
โ  โข Parsea mensaje                   โ
โ  โข Extrae contexto                  โ
โโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
       โ 3. MessageReceivedEvent
       โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  MessageService                     โ
โ  โข Guarda mensaje en BD             โ
โ  โข Identifica workflow asociado     โ
โโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
       โ 4. startWorkflow()
       โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  WorkflowService                    โ
โ  โข Crea instancia de proceso        โ
โ  โข Setea variables                  โ
โโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
       โ 5. runtimeService.startProcessInstanceByKey()
       โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  Flowable Engine                    โ
โ  โข Ejecuta nodos BPMN               โ
โ  โข Llama a Service Tasks            โ
โโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
       โ 6. Ejecuta tareas custom
       โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  Custom Task Handlers               โ
โ  โข ProcessMessageTask               โ
โ  โข SendResponseTask                 โ
โ  โข LogTask                          โ
โโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
       โ 7. Operaciones de negocio
       โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  Business Services                  โ
โ  โข Consulta BD                      โ
โ  โข Aplica lรณgica                    โ
โ  โข Prepara respuesta                โ
โโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
       โ 8. Guarda en BD
       โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  PostgreSQL                         โ
โ  โข messages                         โ
โ  โข workflow_executions              โ
โ  โข logs                             โ
โโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
       โ 9. Envรญa respuesta
       โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  TelegramBotService                 โ
โ  โข sendMessage()                    โ
โโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
       โ 10. API Call
       โ
โโโโโโโโโโโโโโโโโโโโโโโ
โ  Telegram Bot API   โ
โโโโโโโโฌโโโโโโโโโโโโโโโ
       โ 11. Mensaje entregado
       โ
โโโโโโโโโโโโโโโ
โ   Usuario   โ
โ  (Telegram) โ
โโโโโโโโโโโโโโโ
```

### Escenario 2: Ejecuciรณn Manual desde UI

```
โโโโโโโโโโโโโโโ
โ  Admin UI   โ
โ  (Vaadin)   โ
โโโโโโโโฌโโโโโโโ
       โ 1. Click "Ejecutar Workflow"
       โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  WorkflowView (Vaadin)              โ
โ  โข Valida permisos                  โ
โ  โข Captura parรกmetros               โ
โโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
       โ 2. workflowService.execute()
       โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  WorkflowService                    โ
โ  โข Valida workflow                  โ
โ  โข Crea execution context           โ
โโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
       โ 3. Start process instance
       โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  Flowable Engine                    โ
โ  โข Ejecuta proceso BPMN             โ
โ  โข Emite eventos de progreso        โ
โโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
       โ 4. WebSocket events
       โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ExecutionEventPublisher            โ
โ  โข Publica eventos en tiempo real   โ
โโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
       โ 5. WebSocket push
       โ
โโโโโโโโโโโโโโโ
โ  Admin UI   โ
โ  (Vaadin)   โ
โ  โข Actualiza โ
โ    progreso  โ
โโโโโโโโโโโโโโโ
```

## ๐๏ธ Modelo de Datos

### Esquema de Base de Datos

```sql
-- USUARIOS Y SEGURIDAD
CREATE TABLE users (
    id BIGSERIAL PRIMARY KEY,
    username VARCHAR(100) UNIQUE NOT NULL,
    email VARCHAR(255) UNIQUE NOT NULL,
    password_hash VARCHAR(255) NOT NULL,
    role VARCHAR(50) NOT NULL,
    enabled BOOLEAN DEFAULT true,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- WORKFLOWS
CREATE TABLE workflows (
    id BIGSERIAL PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    description TEXT,
    bpmn_xml TEXT NOT NULL,
    version INTEGER DEFAULT 1,
    status VARCHAR(50) DEFAULT 'DRAFT',
    created_by BIGINT REFERENCES users(id),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- EJECUCIONES DE WORKFLOWS
CREATE TABLE workflow_executions (
    id BIGSERIAL PRIMARY KEY,
    workflow_id BIGINT REFERENCES workflows(id),
    process_instance_id VARCHAR(255) UNIQUE,
    status VARCHAR(50) NOT NULL,
    started_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    ended_at TIMESTAMP,
    started_by BIGINT REFERENCES users(id),
    error_message TEXT,
    variables JSONB
);

-- CONFIGURACIรN DE BOTS
CREATE TABLE bot_configurations (
    id BIGSERIAL PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    type VARCHAR(50) NOT NULL, -- TELEGRAM, WHATSAPP
    token VARCHAR(500), -- Encriptado
    webhook_url VARCHAR(500),
    status VARCHAR(50) DEFAULT 'INACTIVE',
    config JSONB,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- MENSAJES
CREATE TABLE messages (
    id BIGSERIAL PRIMARY KEY,
    bot_id BIGINT REFERENCES bot_configurations(id),
    external_id VARCHAR(255),
    chat_id VARCHAR(255) NOT NULL,
    user_id VARCHAR(255),
    direction VARCHAR(20) NOT NULL, -- INBOUND, OUTBOUND
    content TEXT NOT NULL,
    message_type VARCHAR(50) DEFAULT 'TEXT',
    metadata JSONB,
    workflow_execution_id BIGINT REFERENCES workflow_executions(id),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- LOGS
CREATE TABLE system_logs (
    id BIGSERIAL PRIMARY KEY,
    level VARCHAR(20) NOT NULL,
    logger VARCHAR(255),
    message TEXT NOT NULL,
    exception TEXT,
    workflow_execution_id BIGINT REFERENCES workflow_executions(id),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- รNDICES
CREATE INDEX idx_messages_bot_id ON messages(bot_id);
CREATE INDEX idx_messages_chat_id ON messages(chat_id);
CREATE INDEX idx_messages_created_at ON messages(created_at);
CREATE INDEX idx_workflow_executions_workflow_id ON workflow_executions(workflow_id);
CREATE INDEX idx_workflow_executions_status ON workflow_executions(status);
CREATE INDEX idx_system_logs_created_at ON system_logs(created_at);
```

## ๐ Componentes Principales

### 1. Flowable Engine Configuration

```java
@Configuration
public class FlowableConfig {
    
    @Bean
    public SpringProcessEngineConfiguration processEngineConfiguration(
            DataSource dataSource,
            PlatformTransactionManager transactionManager) {
        
        SpringProcessEngineConfiguration config = new SpringProcessEngineConfiguration();
        config.setDataSource(dataSource);
        config.setTransactionManager(transactionManager);
        config.setDatabaseSchemaUpdate("true");
        config.setAsyncExecutorActivate(true);
        config.setMailServerHost("localhost");
        
        return config;
    }
}
```

### 2. Vaadin UI Architecture

```
VaadinUI/
โโโ MainLayout.java              # Layout principal con menรบ
โโโ views/
โ   โโโ DashboardView.java       # Dashboard principal
โ   โโโ WorkflowListView.java    # Lista de workflows
โ   โโโ WorkflowEditorView.java  # Editor visual BPMN
โ   โโโ ExecutionMonitorView.java # Monitor de ejecuciones
โ   โโโ BotManagementView.java   # Gestiรณn de bots
โ   โโโ LogsView.java            # Visor de logs
โโโ components/
โ   โโโ WorkflowCard.java        # Card de workflow
โ   โโโ ExecutionTimeline.java   # Timeline de ejecuciรณn
โ   โโโ BotStatusBadge.java      # Badge de estado
โโโ security/
    โโโ SecurityConfig.java      # Configuraciรณn de seguridad
```

### 3. Bot Integration Layer

```
bot/
โโโ telegram/
โ   โโโ TelegramBotService.java
โ   โโโ TelegramBotListener.java
โ   โโโ TelegramMessageHandler.java
โโโ whatsapp/
โ   โโโ WhatsAppBotService.java
โ   โโโ WhatsAppWebClient.java (Node.js bridge)
โ   โโโ WhatsAppMessageHandler.java
โโโ common/
    โโโ BotMessage.java
    โโโ BotMessageHandler.java
    โโโ BotEventPublisher.java
```

## ๐ Seguridad

### Capas de Seguridad

1. **Autenticaciรณn**: JWT tokens con Spring Security
2. **Autorizaciรณn**: RBAC con roles (ADMIN, USER, VIEWER)
3. **Encriptaciรณn**: Credenciales de bots encriptadas con AES-256
4. **Rate Limiting**: Limitaciรณn de requests por IP/usuario
5. **Audit Log**: Registro de todas las acciones crรญticas

### Configuraciรณn de Seguridad

```java
@Configuration
@EnableWebSecurity
public class SecurityConfig {
    
    @Bean
    public SecurityFilterChain filterChain(HttpSecurity http) {
        return http
            .csrf().disable()
            .authorizeHttpRequests(auth -> auth
                .requestMatchers("/api/public/**").permitAll()
                .requestMatchers("/api/admin/**").hasRole("ADMIN")
                .anyRequest().authenticated()
            )
            .oauth2ResourceServer(OAuth2ResourceServerConfigurer::jwt)
            .build();
    }
}
```

## ๐ Monitoreo y Observabilidad

### Mรฉtricas Clave

- **Workflows**: Total, activos, fallidos
- **Mensajes**: Enviados, recibidos, tasa de error
- **Bots**: Estado, uptime, latencia
- **Sistema**: CPU, memoria, conexiones DB

### Stack de Monitoreo

- **Actuator**: Endpoints de health y metrics
- **Micrometer**: Mรฉtricas exportables
- **Prometheus**: (Opcional) Recolecciรณn de mรฉtricas
- **Grafana**: (Opcional) Dashboards

## ๐ Escalabilidad

### Estrategias de Escalado

1. **Horizontal**: Mรบltiples instancias con load balancer
2. **Vertical**: Incrementar recursos de la instancia
3. **Database**: Connection pooling, read replicas
4. **Cache**: Redis para sesiones y datos frecuentes
5. **Async**: Message queue para operaciones pesadas

### Lรญmites y Consideraciones

- **PostgreSQL local**: ~200 conexiones concurrentes
- **Flowable**: ~1000 procesos activos simultรกneos
- **Vaadin**: ~100 usuarios concurrentes por instancia
- **Bots**: Lรญmites de API de Telegram/WhatsApp

## ๐ Patrones de Diseรฑo Utilizados

1. **Repository Pattern**: Acceso a datos
2. **Service Layer**: Lรณgica de negocio
3. **Factory Pattern**: Creaciรณn de handlers de bots
4. **Observer Pattern**: Eventos de workflow
5. **Strategy Pattern**: Diferentes tipos de tareas
6. **Builder Pattern**: Construcciรณn de workflows

## ๐ Prรณximos Pasos

Ver documentos especรญficos:
- [Guรญa de Implementaciรณn](../implementation/GUIDE.md)
- [Migraciรณn a Supabase](../migration/SUPABASE.md)
- [Alternativas de Deployment](../deployment/ALTERNATIVES.md)
